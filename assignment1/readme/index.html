<!-- Fix MathJax rendering on iOS Safari due to rendering long numbers as phone numbers. -->




<!doctype html>
<html lang="en" class="no-js">
  <head>
    
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Course website for introduction to database systems at Fudan University">
      
      
        <link rel="canonical" href="https://zfhu.ac.cn/IDBS-Spring20-Fudan/assignment1/readme/">
      
      
        <meta name="author" content="Zhifeng Hu">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="/static/assets/fudan.svg">
      <meta name="generator" content="mkdocs-1.1, mkdocs-material-4.6.3">
    
    <meta name="format-detection" content="telephone=no">

    
      
        <title>Instruction - IDBS-Spring20-Fudan</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.adb8469c.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/application-palette.a8b3c06d.css">
      
      
        
        
        <meta name="theme-color" content="">
      
    
    
      <script src="../../assets/javascripts/modernizr.86422ebf.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="../../static/css/katex.css">
    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/katex.min.css">
    
    
      
        
<script>
  window.ga = window.ga || function() {
    (ga.q = ga.q || []).push(arguments)
  }
  ga.l = +new Date
  /* Setup integration and send page view */
  ga("create", "UA-149024530-1", "auto")
  ga("set", "anonymizeIp", true)
  ga("send", "pageview")
  /* Register handler to log search on blur */
  document.addEventListener("DOMContentLoaded", () => {
    if (document.forms.search) {
      var query = document.forms.search.query
      query.addEventListener("blur", function() {
        if (this.value) {
          var path = document.location.pathname;
          ga("send", "pageview", path + "?q=" + this.value)
        }
      })
    }
  })
</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="black" data-md-color-accent="blue">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#assignment-1-basic-sql" tabindex="0" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://zfhu.ac.cn/IDBS-Spring20-Fudan" title="IDBS-Spring20-Fudan" aria-label="IDBS-Spring20-Fudan" class="md-header-nav__button md-logo">
          
            <i class="md-icon">code</i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              IDBS-Spring20-Fudan
            </span>
            <span class="md-header-nav__topic">
              
                Instruction
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" aria-label="search" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/ichn-hu/IDBS-Spring20-Fudan/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    ichn-hu/IDBS-Spring20-Fudan
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
        

  

<nav class="md-tabs md-tabs--active" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  <li class="md-tabs__item">
    
      <a href="../.." class="md-tabs__link">
        Welcome
      </a>
    
  </li>

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="./" class="md-tabs__link md-tabs__link--active">
          Assignment 1
        </a>
      
    </li>
  

      
    </ul>
  </div>
</nav>
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://zfhu.ac.cn/IDBS-Spring20-Fudan" title="IDBS-Spring20-Fudan" class="md-nav__button md-logo">
      
        <i class="md-icon">code</i>
      
    </a>
    IDBS-Spring20-Fudan
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/ichn-hu/IDBS-Spring20-Fudan/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    ichn-hu/IDBS-Spring20-Fudan
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Welcome" class="md-nav__link">
      Welcome
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2" checked>
    
    <label class="md-nav__link" for="nav-2">
      Assignment 1
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Assignment 1
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Instruction
      </label>
    
    <a href="./" title="Instruction" class="md-nav__link md-nav__link--active">
      Instruction
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#working-directory-setup" class="md-nav__link">
    Working Directory Setup
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#table-creation" class="md-nav__link">
    Table Creation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#query-from-the-database" class="md-nav__link">
    Query from the Database
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#submit-your-solution" class="md-nav__link">
    Submit Your Solution
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#references" class="md-nav__link">
    References
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#working-directory-setup" class="md-nav__link">
    Working Directory Setup
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#table-creation" class="md-nav__link">
    Table Creation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#query-from-the-database" class="md-nav__link">
    Query from the Database
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#submit-your-solution" class="md-nav__link">
    Submit Your Solution
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#references" class="md-nav__link">
    References
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/ichn-hu/IDBS-Spring20-Fudan/edit/master/content/assignment1/readme.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="assignment-1-basic-sql">Assignment 1, Basic SQL<a class="headerlink" href="#assignment-1-basic-sql" title="Permanent link">&para;</a></h1>
<p>This is the first assignment of the course, it asks you to write SQL to create tables and query from them.</p>
<p>Basically you need to use</p>
<ul>
<li>create</li>
<li>select</li>
<li>where</li>
<li>join</li>
<li>group by</li>
<li>order by</li>
<li>having</li>
</ul>
<p>to be able to finish the assignment.</p>
<h2 id="working-directory-setup">Working Directory Setup<a class="headerlink" href="#working-directory-setup" title="Permanent link">&para;</a></h2>
<p>This is the first step of the assignment, you need to get yourself familiar with <code>git</code> and GitHub.</p>
<p>First of all, create a GitHub id if you do not yet have one.</p>
<p>Then <a href="https://github.com/ichn-hu/IDBS-Spring20-Fudan">fork this project</a> on GitHub, which will create a mirror repository under your own account.</p>
<p>Then <code>git clone</code> your forked project in your local environment. You need to <a href="https://kbroman.org/github_tutorial/pages/first_time.html">setup your GitHub account on your local machine</a> for <code>git</code> if you have not yet done so.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="err">git clone https://github.com/your-github-id/IDBS-Spring20-Fudan.git</span>
</code></pre></div>
</td></tr></table>

<p>Once you've cloned the project in your local environment, get to <code>IDBS-Spring20-Fudan/assignments/ass1/submission</code> and create a directory and name it by your student id, for example <code>IDBS-Spring20-Fudan/assignments/ass1/submission/16307130177</code>, and this directory will be your working directory. <strong>You are ONLY allowed to modify files under this directory, any other modifications outside this directory will make your submission invalid.</strong></p>
<h2 id="table-creation">Table Creation<a class="headerlink" href="#table-creation" title="Permanent link">&para;</a></h2>
<p>You need to create 3 tables under the database <code>ass1</code>, namely <code>employee</code>, <code>book</code> and <code>record</code>.</p>
<p>Create a file named <code>create_table.sql</code> under your working directory, and write the SQL to create the tables asked in that file.</p>
<p>The constraint for each table is:</p>
<ul>
<li><code>employee</code> has 4 columns, <code>id</code>, <code>name</code>, <code>office</code> and <code>age</code>, where <code>id</code> is the primary key and <code>name</code> and <code>office</code> is ascii string with length smaller than 32, while <code>age</code> is number between 0 and 100. Choose appropriate type for each column.</li>
<li><code>book</code> also has 4 columns, <code>id</code>, <code>name</code>, <code>author</code> and <code>publisher</code>, where <code>id</code> is the primary key and other columns are all ascii string with length smaller than 32.</li>
<li><code>record</code> has 3 columns, <code>book_id</code>, <code>employee_id</code> and <code>time</code>, where the two IDs are foreign keys that references the <code>id</code> column of <code>book</code> and <code>employee</code>, and <code>time</code> is of type <code>DATE</code>.</li>
</ul>
<p>Once you finished the table creation SQLs, create a database in your MySQL named <code>ass1</code>, and then run the following command in your command line with <code>username</code> replaced by your username (such as <code>root</code>), the command asks the MySQL client to connect to the MySQL server running at <code>localhost</code> on behalf of the user specified by the <code>username</code> and run the SQLs in the given file <code>create_table.sql</code> under database <code>ass1</code>.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="err">mysql -h localhost -u username ass1 -p &lt; create_table.sql</span>
</code></pre></div>
</td></tr></table>

<p>If <code>mysql</code> complains about any error, try to fix it in <code>create_table.sql</code>. You could drop and recreate the database <code>ass1</code> if you've ruined the database with wrongly created tables.</p>
<p>Once you've created the table, take a look at <code>assignments/ass1/insert_data.sql</code>, which inserts sample data into your newly created tables, run them through MySQL client as well:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="err">mysql -h localhost -u username ass1 -p &lt; ../../insert_data.sql</span>
</code></pre></div>
</td></tr></table>

<p>The data is meant for you to play with the database and test with your own SQLs. If you could not run them, it means the tables you've created using <code>create_table.sql</code> is wrong, please double check that your table creation SQLs are correct.</p>
<h2 id="query-from-the-database">Query from the Database<a class="headerlink" href="#query-from-the-database" title="Permanent link">&para;</a></h2>
<p>In this part, you are going to write queries to play with the database you just created.</p>
<p>For each part, create a file in your working directory, for example <code>1.sql</code>, <code>2.sql</code> etc.</p>
<ol>
<li>Query all fields for employees named <code>Jones</code></li>
<li>Query the name of employees with ID equals to <code>1</code> or <code>2</code> (order does not matter)</li>
<li>Query the name of all employees except the one whose ID is <code>1</code> (ordered by ID)</li>
<li>Query the name of all employees with age between 25 and 30 (inclusively, ordered by ID)</li>
<li>Query all fields for employees whose name started with <code>J</code> (ordered by age)</li>
<li>Query the names of all publishers, if one publisher has more than two books in the database, output the name of the publisher only once (ordered by name, ascii order)</li>
<li>Query the id of all books that is borrowed after <code>2016-10-31</code>, also the IDs should be distinct (ordered by id)</li>
<li>Query for each employee who has borrowed book more than once, output the <code>id</code>, <code>name</code>, and number of borrow record (name the field <code>num</code>), ordered by <code>num</code> in descending order. This one is kind of challenging, the TA's solution uses JOIN, GROUP BY, HAVING and ORDER BY, check them out if you don't know what these key words mean for MySQL.</li>
</ol>
<h2 id="submit-your-solution">Submit Your Solution<a class="headerlink" href="#submit-your-solution" title="Permanent link">&para;</a></h2>
<p>Make sure you have files</p>
<ul>
<li><code>create_table.sql</code></li>
<li><code>1.sql</code>, ..., <code>8.sql</code></li>
</ul>
<p>in your working directory.</p>
<p>Then use the following command to submit these files (run it at your working directory).</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="err">git add . # add your submission into git</span>
<span class="err">git commit -m &quot;submission of xxx for ass1&quot; # identify your submission</span>
<span class="err">git push # push your local submission to your remote forked repository</span>
</code></pre></div>
</td></tr></table>

<p>And then get to your GitHub page and create a pull request<sup id="fnref:1"><a class="footnote-ref" href="#fn:1">1</a></sup>. The time you create the pull request will be considered as the submission time.</p>
<p><strong>Note</strong>: the submitted files will be evaluated using an automatic script written in golang, the script will later be uploaded, so make sure you follow all these instructions to make the file hiearchy correct, otherwise the script won't work and you will lose the mark.</p>
<p><strong>Also, do not cheat by looking at other's submission, it violates our honor code.</strong></p>
<p>Should you have any question, try to search it using Google first. If want clarification of the assignment, then please create an issue in the project repository.</p>
<h2 id="references">References<a class="headerlink" href="#references" title="Permanent link">&para;</a></h2>
<p>There are many tutorials online about how to write SQL, you might find the following links helpful</p>
<ul>
<li><a href="https://www.mysqltutorial.org/">MySQL Tutorial</a></li>
<li><a href="https://www.tutorialspoint.com/mysql/index.htm">MySQL Tutorial</a></li>
</ul>
<div class="footnote">
<hr />
<ol>
<li id="fn:1">
<p>https://help.github.com/en/github/collaborating-with-issues-and-pull-requests/creating-a-pull-request-from-a-fork&#160;<a class="footnote-backref" href="#fnref:1" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
</ol>
</div>
                
                  
                
                
              
              
<script src="https://utteranc.es/client.js"
        repo="ichn-hu/IDBS-Spring20-Fudan"
        issue-term="pathname"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script>

            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../.." title="Welcome" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Welcome
              </span>
            </div>
          </a>
        
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Built by <a href="http://github.com/ichn-hu">ichn-hu</a> &copy; 2020
          </div>
        
        powered by
        <a href="https://www.mkdocs.org" target="_blank" rel="noopener">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs</a>
      </div>
      
  <div class="md-footer-social">
    <link rel="stylesheet" href="../../assets/fonts/font-awesome.css">
    
      <a href="https://github.com/ichn-hu" target="_blank" rel="noopener" title="github" class="md-footer-social__link fa fa-github"></a>
    
      <a href="https://github.com/ichn-hu/IDBS-Spring20-Fudan" target="_blank" rel="noopener" title="quote-left" class="md-footer-social__link fa fa-quote-left"></a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.c33a9706.js"></script>
      
      <script>app.initialize({version:"1.1",url:{base:"../.."}})</script>
      
        <script src="../../static/js/katex.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/katex.min.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/contrib/auto-render.min.js"></script>
      
    
  </body>
</html>